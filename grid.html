<html>
<head>
<style>
body {
	background-color: gray;
}
a {
	display: inline-block;
	width: 5px;
	height: 5px;
	border-top: 1px solid #707070;
	border-left: 1px solid #707070;
	margin-right: 0px;
}
a:hover {
	background-color: black;
}
.row_divider {
	height: 0px;
}
#wrapper {
	text-align: center;
}
#grid {
	display: inline-block;
}
</style>
<script src="bar.json"></script>
</head>
<body>
<div id="wrapper">
<div id="grid"></div>
</div>

<script>

console.log(bar_pixels[76]);
console.log(bar_pixels[77]);
console.log(bar_pixels[78]);

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

var num = 100;
var sleep_time = .1;

function build(i) {
	var node = document.createElement("a");
	var textnode = document.createTextNode(' '); // i
	node.appendChild(textnode);
	document.getElementById("grid").appendChild(node);
	document.getElementsByTagName("a")[i-1].setAttribute("id", "pos_"+i);
	document.getElementsByTagName("a")[i-1].setAttribute("class", "default");
	document.getElementsByTagName("a")[i-1].setAttribute("onclick", "changed2("+i+")");
	if (i % num) {
		//
	} else {
		document.getElementById("grid").innerHTML += "<div class='row_divider'></div>";
	}
}

function changed1(i) {
	document.getElementById("pos_"+i).style.backgroundColor = "black";
}

function changed2(i) {
	document.getElementById("pos_"+i).style.backgroundColor = 'rgb' + bar_pixels[i-1];
	console.log(i);
}

var i;
for (i = 1; i <= num*num; i++) {
	build(i);
}

function shuffle(array) {
  // https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array
  var currentIndex = array.length, temporaryValue, randomIndex;
  // While there remain elements to shuffle...
  while (0 !== currentIndex) {
    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;
    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }
  return array;
}

async function randomy() {
	var n;
	var grid_array = [];

	for (n = 1; n <= num*num; n++) {
		grid_array.push(n);
	}

	// randomize oder of array
	var shuffled_grid_array = shuffle(grid_array);

	// pop latest from array in loop
	var m;
    var x;
	for (m = 1; m <= num*num; m++) {
	    x = shuffled_grid_array.pop();
		changed2(x)
		await sleep(sleep_time);
	}
}

randomy();

</script>
</body>
</html>
